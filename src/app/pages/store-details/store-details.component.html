
<div class="header bg-gradient-danger pb-8 pt-1 pt-md-8">
    <div class="container-fluid">
      <div class="header-body">
      <div class="row">
        <div class="col-lg-9 col-md-10">
          <div class="d-flex justify-content-between">
            <h1 class="display-2 text-secondary text-uppercase d-none d-lg-inline-block" *ngIf ="store">
              {{store.namestore}}</h1>
          </div>
          <p class="text-secondary " *ngIf ="store">
            <span class="text-secondary"><i class="ni ni-square-pin"></i> Địa chỉ: </span>
            {{store.address}}
          </p>

        </div>
        <div class="col-2">
          <button class="btn btn-default float-right"> <span><i class="ni ni-ui-04"></i></span> Chỉnh sửa</button>

        </div>


      </div>
      <div class="row mb-5 mt-2">
        <div class="col-lg-7 col-md-10">
           <button class="btn btn-info dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">  Quản lí kho</button>
           <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" [routerLink]="['inventory']"><span><i class="fa fa-list"></i></span> Kiểm kho</a>
            <a class="dropdown-item" [routerLink]="['import']"><span><i class="fa fa-upload"></i></span> Nhập hàng</a>
        </div>
        </div>
      </div>
        <!-- Card stats -->
      <div class="row">
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Traffic</h5>
                  <span class="h2 font-weight-bold mb-0">350,897</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                    <i class="fas fa-chart-bar"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                <span class="text-nowrap">Since last month</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">New users</h5>
                  <span class="h2 font-weight-bold mb-0">2,356</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                    <i class="fas fa-chart-pie"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>
                <span class="text-nowrap">Since last week</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Sales</h5>
                  <span class="h2 font-weight-bold mb-0">924</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                    <i class="fas fa-users"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                <span class="text-nowrap">Since yesterday</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Performance</h5>
                  <span class="h2 font-weight-bold mb-0">49,65%</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                    <i class="fas fa-percent"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span>
                <span class="text-nowrap">Since last month</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid mt--7">



      <div class="card bg-secondary shadow">
        <div class="card-header bg-white border-0">
            <div class="d-flex justify-content-between">
                <h4 class="card-title text-uppercase text-info  mb-0">Lịch làm việc</h4>
                <!-- <div class="row float-right">
                  <button class="btn btn-sm btn-info float-right" [routerLink]="['/chain-store/detail/',idStore,'add-staff',ismanger]"> <span><i class="fa fa-list"></i></span> Kiểm kho</button>
                  <button class="btn btn-sm btn-success float-right" [routerLink]="['/chain-store/detail/',idStore,'add-staff',ismanger]"> <span><i class="fa fa-upload"></i></span> Nhập hàng</button>
                </div> -->
            </div>
        </div>

        <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered text-center">
                <thead>
                  <tr class="bg-info text-secondary">
                      <th  class="text-uppercase">
                      </th>
                      <th [ngClass]="{'bg-success' : datenow == Mon}" class="text-uppercase">
                        <span class="text-primary">Thứ hai</span>
                        <br>
                        {{Mon}}
                      </th>
                      <th [ngClass]="{'bg-success' : datenow == Tue}" class="text-uppercase"><span class="text-primary">Thứ Ba</span>
                        <br>
                        {{Tue}}</th>
                      <th [ngClass]="{'bg-success' : datenow == Wed}" class="text-uppercase">
                        <span class="text-primary">Thứ Tư</span>
                        <br>
                        {{Wed}}
                      </th>
                      <th [ngClass]="{'bg-success' : datenow == Thru}" class="text-uppercase">
                        <span class="text-primary">Thứ Năm</span>
                        <br>
                        {{Thru}}
                      </th>
                      <th [ngClass]="{'bg-success' : datenow == Fri}" class="text-uppercase">
                        <span class="text-primary">Thứ Sáu</span>
                        <br>
                        {{Fri}}
                      </th>
                      <th [ngClass]="{'bg-success' : datenow == Sat}" class="text-uppercase">
                        <span class="text-primary">Thứ bảy</span>
                        <br>
                        {{Sat}}
                      </th>
                      <th [ngClass]="{'bg-success' : datenow == Sun}" class="text-uppercase">
                        <span class="text-primary">Chủ nhật</span>
                        <br>
                        {{Sun}}
                      </th>
                  </tr>
              </thead>
              <tbody *ngIf="timeWork">
                  <tr *ngFor="let timework of timeWork.timeshift" >
                    <th scope="row" class="bg-info text-secondary">
                      <div class="media align-items-center">
                          <div class="media-body">
                          <span class="mb-0 text-sm">{{timework.name}}</span>
                          </div>
                      </div>
                    </th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>

                  </tr>
              </tbody>
              </table>
            </div>
        </div>

      </div>






  <div class="row mt-2">
    <div class="col-xl-6">
      <div class="card">
        <div class="card-header bg-white border-0">
            <div class="d-flex justify-content-between">
                <h4 class="card-title text-uppercase text-default mb-0">Nhân viên quản lí chi nhánh</h4>

            </div>
        </div>

        <div class="card-body  pt-2 " *ngIf ="manager">
            <div class="row pt-0">
              <div class="col-4">
                <span class="text-default mr-2"><i class="fa fa-address-card"></i> Họ tên: </span>
              </div>
              <div class="col-auto">
                <p class="mb-0">{{manager.staff.fullname}}</p>
              </div>
            </div>
            <hr class="my-2" />

            <div class="row pt-2">
              <div class="col-4">
                <span class="text-default mr-2"><i class="fa fa-phone-square"></i> Số điện thoại: </span>
              </div>
              <div class="col-auto">
                <p class="mb-0">{{manager.staff.phone}}</p>
              </div>
            </div>
            <hr class="my-2" />

            <div class="row pt-2">
              <div class="col-4">
                <span class="text-default mr-2"><i class="fa fa-location-arrow"></i> Địa chỉ: </span>
              </div>
              <div class="col-auto">
                <p class="mb-0">{{manager.staff.address}}</p>
              </div>
            </div>
        </div>
      </div>
    </div>
    <div class="col-xl-6">
      <div class="card">
        <div class="card-header bg-white border-0">
            <div class="d-flex justify-content-between">
                <h4 class="card-title text-uppercase text-danger mb-0">Ca làm việc</h4>
              <!-- <button class="btn btn-sm btn-default float-right"> <span><i class="ni ni-ui-04"></i></span> Cài đặt</button> -->
              <div class="col-lg-7 col-md-10 float-right">
                <button class="btn btn-sm btn-default dropdown-toggle float-right" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span><i class="ni ni-ui-04"></i></span> Cài đặt</button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                 <a class="dropdown-item" *ngIf="!timeWork;" data-toggle="modal" data-target="#modelTimeShift" >Thêm mới</a>
                 <a class="dropdown-item" *ngIf="timeWork" data-toggle="modal" data-target="#modelTimeShift">Chỉnh sửa</a>
             </div>
            </div>

            <div class="modal fade in" id="staticBackdrop" tabindex="-1" id="modelTimeShift" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" ng-show="isPopupVisible">
              <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" *ngIf="!timeWork;">Thêm ca làm cho cửa hàng</h5>
                    <h5 class="modal-title" *ngIf="timeWork;">Sửa đổi ca làm</h5>
                    <button type="button" #closeModal class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>

                  <form [formGroup]="timeWorkForm" (ngSubmit)="saveTimeWork(timeWorkForm.value)">

                  <div class="modal-body">
                      <!-- <div >

                        <div class="form-group">
                          <label for="price">Số lượng ca</label><span class="text-red">*</span>
                          <input type="text" class="form-control" placeholder="" formControlName ="soluongca">
                        </div>
                      </div> -->


                      <div formArrayName="timeshift">
                        <div *ngFor="let item of timeWorkForm.get('timeshift')['controls'];let i = index">
                          <div  [formGroupName]="i">
                            <h6 class="heading-small text-muted mb-1">Ca số: {{i+1}} </h6>
                            <div class="row">
                              <div class="col-6">
                                <div class="form-group">
                                  <label for="name">Thời gian bắt đầu </label><span *ngIf="i<2" class="text-red">*</span>
                                  <!-- <input type="text" class="form-control"  formControlName ="timestart" > -->
                                  <ngb-timepicker   formControlName ="timestart" ></ngb-timepicker>

                                </div>
                              </div>
                              <div class="col-6">
                                <div class="form-group">
                                  <label for="name">Thời gian kết thúc </label><span *ngIf="i<2" class="text-red">*</span>
                                  <!-- <input type="text" class="form-control" formControlName ="timeend" > -->
                                  <ngb-timepicker   formControlName ="timeend" ></ngb-timepicker>

                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                  </div>

                  <div class="modal-footer">
                    <button type=" submit" class="btn btn-primary">Lưu lại</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                  </div>
                </form>
                </div>
              </div>
            </div>

        </div>

        <div class="card-body pt-4 mb-0 pb-0">
          <div *ngIf="timeWork">
            <div *ngFor="let timework of timeWork.timeshift" >
              <div class=" row pb-0">
                <div class="col-4 text-center pb-0">
                  {{timework.name}}:
                </div>
                <div class="col-6 d-flex pb-0">

                   {{timework.timeStart.hour}}:{{timework.timeStart.minute == 0? "00": timework.timeStart.minute}}


                    <span class="mr-3 ml-3 pb-0">
                      <i class="fa fa-minus" aria-hidden="true"></i>
                    </span>


                  {{timework.timeEnd.hour}}:{{timework.timeEnd.minute == 0? "00": timework.timeEnd.minute}}
                </div>
                <!-- <p class="text-default mb-0 mt-1" >
                  {{timework.name}}: <span class="">{{timework.timeStart.hour}}:{{timework.timeStart.minute}}</span> -> {{timework.timeEnd.hour}}:{{timework.timeEnd.minute}}
                </p> -->
              </div>
              <hr class="mt-2 mb-2">
            </div>
        </div>

        </div>
    </div>
  </div>
</div>


    <div class="card bg-secondary shadow mt-2">
      <div class="card-header bg-white border-0">
          <div class="d-flex justify-content-between">
              <h4 class="card-title text-uppercase text-default mb-0">Danh sách nhân viên</h4>
              <button class="btn btn-sm btn-default float-right" [routerLink]="['/chain-store/detail/',idStore,'add-staff',ismanger]"> <span><i class="ni ni-fat-add"></i></span> Thêm nhân viên</button>
          </div>
      </div>

      <div class="card-body">
        <div class="table-responsive">
          <table class="table align-items-center table-flush">
              <thead class="thead-light">
                  <tr>
                      <th>Họ tên</th>
                      <th>Ngày sinh</th>
                      <th>Số điện thoại</th>
                      <th>Địa chỉ</th>
                      <th></th>
                      <th></th>
                  </tr>
              </thead>
              <tbody *ngIf="arrayStaff">
                  <tr *ngFor="let staff of arrayStaff" (click)="clickChooseStaff(staff.id)" class="tr-staff">
                    <th scope="row">
                      <div class="media align-items-center">
                          <a href="javascript:void(0)" class="avatar rounded-circle mr-3">
                          <img alt="Image placeholder" src="../assets/img/theme/bootstrap.jpg">
                          </a>
                          <div class="media-body">
                          <span class="mb-0 text-sm">{{staff.fullname}}</span>
                          </div>
                      </div>
                      </th>
                      <th>
                        {{staff.birthday}}
                      </th>
                      <th>
                        {{staff.phone}}
                      </th>
                      <th>
                        {{staff.address}}
                      </th>
                      <td class="td-actions">
                        <button class="btn btn-sm btn-warning btn-icon"  type="button"  ><i class="ni ni-settings-gear-65 pt-1"></i>
                        </button>
                    </td>
                    <td class="td-actions">
                        <button class="btn btn-icon btn-sm btn-danger"  type="button" (click)="deleteStaff(staff.id)"><i class="ni ni-fat-remove pt-1"></i>
                        </button>
                    </td>
                  </tr>

              </tbody>

          </table>


      </div>
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item disabled">
            <a class="page-link"  tabindex="-1">
              <i class="fa fa-angle-left"></i>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          <li class="page-item"><a class="page-link" >1</a></li>
          <li class="page-item active"><a class="page-link" >2</a></li>
          <li class="page-item"><a class="page-link">3</a></li>
          <li class="page-item">
            <a class="page-link" >
              <i class="fa fa-angle-right"></i>
              <span class="sr-only">Next</span>
            </a>
          </li>
        </ul>
      </nav>
      </div>
    </div>

</div>

